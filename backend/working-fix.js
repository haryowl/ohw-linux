const fs = require("fs");let content = fs.readFileSync("src/routes/records.js", "utf8");// Add authentication importscontent = content.replace("const ExcelJS = require('exceljs');", "const ExcelJS = require('exceljs');\nconst { requireAuth } = require('./auth');\nconst { filterDevicesByPermission } = require('../middleware/permissions');");// Add authentication to export-sm endpointcontent = content.replace("router.post('/export-sm', async (req, res) => {", "router.post('/export-sm', requireAuth, filterDevicesByPermission, async (req, res) => {");// Remove the problematic Device includecontent = content.replace(/include: \[\{[\s\S]*?model: require\('\.\.\/models'\)\.Device[\s\S]*?\}\]/g, "");fs.writeFileSync("src/routes/records.js", content);console.log("? APPLIED WORKING FIX"); 
